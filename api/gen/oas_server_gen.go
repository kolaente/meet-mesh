// Code generated by ogen, DO NOT EDIT.

package api

import (
	"context"
)

// Handler handles operations described by OpenAPI v3 specification.
type Handler interface {
	// AddCalendar implements addCalendar operation.
	//
	// Add calendar connection.
	//
	// POST /calendars
	AddCalendar(ctx context.Context, req *AddCalendarReq) (*CalendarConnection, error)
	// AddSlot implements addSlot operation.
	//
	// Add a slot to a link.
	//
	// POST /links/{id}/slots
	AddSlot(ctx context.Context, req *AddSlotReq, params AddSlotParams) (*Slot, error)
	// ApproveBooking implements approveBooking operation.
	//
	// Approve a booking.
	//
	// POST /bookings/{id}/approve
	ApproveBooking(ctx context.Context, params ApproveBookingParams) (*Booking, error)
	// ApproveViaEmail implements approveViaEmail operation.
	//
	// Approve booking via email link.
	//
	// GET /actions/approve
	ApproveViaEmail(ctx context.Context) (ApproveViaEmailRes, error)
	// AuthCallback implements authCallback operation.
	//
	// Handle OIDC callback.
	//
	// GET /auth/callback
	AuthCallback(ctx context.Context, params AuthCallbackParams) (AuthCallbackRes, error)
	// CreateBooking implements createBooking operation.
	//
	// Create a booking.
	//
	// POST /p/{slug}/book
	CreateBooking(ctx context.Context, req *CreateBookingReq, params CreateBookingParams) (CreateBookingRes, error)
	// CreateLink implements createLink operation.
	//
	// Create a link.
	//
	// POST /links
	CreateLink(ctx context.Context, req *CreateLinkReq) (*Link, error)
	// DeclineBooking implements declineBooking operation.
	//
	// Decline a booking.
	//
	// POST /bookings/{id}/decline
	DeclineBooking(ctx context.Context, params DeclineBookingParams) (*Booking, error)
	// DeclineViaEmail implements declineViaEmail operation.
	//
	// Decline booking via email link.
	//
	// GET /actions/decline
	DeclineViaEmail(ctx context.Context) (DeclineViaEmailRes, error)
	// DeleteLink implements deleteLink operation.
	//
	// Delete a link.
	//
	// DELETE /links/{id}
	DeleteLink(ctx context.Context, params DeleteLinkParams) error
	// GetAvailability implements getAvailability operation.
	//
	// Get real-time availability.
	//
	// GET /p/{slug}/availability
	GetAvailability(ctx context.Context, params GetAvailabilityParams) (*GetAvailabilityOK, error)
	// GetCurrentUser implements getCurrentUser operation.
	//
	// Get current user.
	//
	// GET /auth/me
	GetCurrentUser(ctx context.Context) (GetCurrentUserRes, error)
	// GetLink implements getLink operation.
	//
	// Get link details.
	//
	// GET /links/{id}
	GetLink(ctx context.Context, params GetLinkParams) (*Link, error)
	// GetLinkBookings implements getLinkBookings operation.
	//
	// Get bookings for a link.
	//
	// GET /links/{id}/bookings
	GetLinkBookings(ctx context.Context, params GetLinkBookingsParams) ([]Booking, error)
	// GetLinkSlots implements getLinkSlots operation.
	//
	// Get slots for a link.
	//
	// GET /links/{id}/slots
	GetLinkSlots(ctx context.Context, params GetLinkSlotsParams) ([]Slot, error)
	// GetLinkVotes implements getLinkVotes operation.
	//
	// Get votes for a poll.
	//
	// GET /links/{id}/votes
	GetLinkVotes(ctx context.Context, params GetLinkVotesParams) ([]Vote, error)
	// GetPollResults implements getPollResults operation.
	//
	// Get poll results.
	//
	// GET /p/{slug}/results
	GetPollResults(ctx context.Context, params GetPollResultsParams) (GetPollResultsRes, error)
	// GetPublicLink implements getPublicLink operation.
	//
	// Get public link info.
	//
	// GET /p/{slug}
	GetPublicLink(ctx context.Context, params GetPublicLinkParams) (GetPublicLinkRes, error)
	// InitiateLogin implements initiateLogin operation.
	//
	// Redirect to OIDC provider.
	//
	// GET /auth/login
	InitiateLogin(ctx context.Context) (*InitiateLoginFound, error)
	// ListCalendars implements listCalendars operation.
	//
	// List calendar connections.
	//
	// GET /calendars
	ListCalendars(ctx context.Context) ([]CalendarConnection, error)
	// ListLinks implements listLinks operation.
	//
	// List all links.
	//
	// GET /links
	ListLinks(ctx context.Context) ([]Link, error)
	// Logout implements logout operation.
	//
	// Clear session.
	//
	// POST /auth/logout
	Logout(ctx context.Context) error
	// PickPollWinner implements pickPollWinner operation.
	//
	// Pick winning slot for poll.
	//
	// POST /links/{id}/pick-winner
	PickPollWinner(ctx context.Context, req *PickPollWinnerReq, params PickPollWinnerParams) error
	// RemoveCalendar implements removeCalendar operation.
	//
	// Remove calendar connection.
	//
	// DELETE /calendars/{id}
	RemoveCalendar(ctx context.Context, params RemoveCalendarParams) error
	// SubmitVote implements submitVote operation.
	//
	// Submit poll vote.
	//
	// POST /p/{slug}/vote
	SubmitVote(ctx context.Context, req *SubmitVoteReq, params SubmitVoteParams) (*Vote, error)
	// UpdateLink implements updateLink operation.
	//
	// Update a link.
	//
	// PUT /links/{id}
	UpdateLink(ctx context.Context, req *UpdateLinkReq, params UpdateLinkParams) (*Link, error)
}

// Server implements http server based on OpenAPI v3 specification and
// calls Handler to handle requests.
type Server struct {
	h   Handler
	sec SecurityHandler
	baseServer
}

// NewServer creates new Server.
func NewServer(h Handler, sec SecurityHandler, opts ...ServerOption) (*Server, error) {
	s, err := newServerConfig(opts...).baseServer()
	if err != nil {
		return nil, err
	}
	return &Server{
		h:          h,
		sec:        sec,
		baseServer: s,
	}, nil
}
