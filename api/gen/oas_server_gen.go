// Code generated by ogen, DO NOT EDIT.

package api

import (
	"context"
)

// Handler handles operations described by OpenAPI v3 specification.
type Handler interface {
	// AddCalendar implements addCalendar operation.
	//
	// Add calendar connection.
	//
	// POST /calendars
	AddCalendar(ctx context.Context, req *AddCalendarReq) (*CalendarConnection, error)
	// AddPollOption implements addPollOption operation.
	//
	// Add an option to a poll.
	//
	// POST /polls/{id}/options
	AddPollOption(ctx context.Context, req *AddPollOptionReq, params AddPollOptionParams) (*PollOption, error)
	// ApproveBooking implements approveBooking operation.
	//
	// Approve a booking.
	//
	// POST /bookings/{id}/approve
	ApproveBooking(ctx context.Context, params ApproveBookingParams) (*Booking, error)
	// ApproveViaEmail implements approveViaEmail operation.
	//
	// Approve booking via email link.
	//
	// GET /actions/approve
	ApproveViaEmail(ctx context.Context) (ApproveViaEmailRes, error)
	// AuthCallback implements authCallback operation.
	//
	// Handle OIDC callback.
	//
	// GET /auth/callback
	AuthCallback(ctx context.Context, params AuthCallbackParams) (AuthCallbackRes, error)
	// CreateBooking implements createBooking operation.
	//
	// Create a booking.
	//
	// POST /p/booking/{slug}/book
	CreateBooking(ctx context.Context, req *CreateBookingReq, params CreateBookingParams) (CreateBookingRes, error)
	// CreateBookingLink implements createBookingLink operation.
	//
	// Create a booking link.
	//
	// POST /booking-links
	CreateBookingLink(ctx context.Context, req *CreateBookingLinkReq) (*BookingLink, error)
	// CreatePoll implements createPoll operation.
	//
	// Create a poll.
	//
	// POST /polls
	CreatePoll(ctx context.Context, req *CreatePollReq) (*Poll, error)
	// DeclineBooking implements declineBooking operation.
	//
	// Decline a booking.
	//
	// POST /bookings/{id}/decline
	DeclineBooking(ctx context.Context, params DeclineBookingParams) (*Booking, error)
	// DeclineViaEmail implements declineViaEmail operation.
	//
	// Decline booking via email link.
	//
	// GET /actions/decline
	DeclineViaEmail(ctx context.Context) (DeclineViaEmailRes, error)
	// DeleteBookingLink implements deleteBookingLink operation.
	//
	// Delete a booking link.
	//
	// DELETE /booking-links/{id}
	DeleteBookingLink(ctx context.Context, params DeleteBookingLinkParams) error
	// DeletePoll implements deletePoll operation.
	//
	// Delete a poll.
	//
	// DELETE /polls/{id}
	DeletePoll(ctx context.Context, params DeletePollParams) error
	// DeletePollOption implements deletePollOption operation.
	//
	// Delete an option from a poll.
	//
	// DELETE /polls/{id}/options/{optionId}
	DeletePollOption(ctx context.Context, params DeletePollOptionParams) error
	// GetBookingAvailability implements getBookingAvailability operation.
	//
	// Get real-time availability for booking link.
	//
	// GET /p/booking/{slug}/availability
	GetBookingAvailability(ctx context.Context, params GetBookingAvailabilityParams) (*GetBookingAvailabilityOK, error)
	// GetBookingLink implements getBookingLink operation.
	//
	// Get booking link details.
	//
	// GET /booking-links/{id}
	GetBookingLink(ctx context.Context, params GetBookingLinkParams) (*BookingLink, error)
	// GetBookingLinkBookings implements getBookingLinkBookings operation.
	//
	// Get bookings for a booking link.
	//
	// GET /booking-links/{id}/bookings
	GetBookingLinkBookings(ctx context.Context, params GetBookingLinkBookingsParams) ([]Booking, error)
	// GetCurrentUser implements getCurrentUser operation.
	//
	// Get current user.
	//
	// GET /auth/me
	GetCurrentUser(ctx context.Context) (GetCurrentUserRes, error)
	// GetPoll implements getPoll operation.
	//
	// Get poll details.
	//
	// GET /polls/{id}
	GetPoll(ctx context.Context, params GetPollParams) (*Poll, error)
	// GetPollOptions implements getPollOptions operation.
	//
	// Get options for a poll.
	//
	// GET /polls/{id}/options
	GetPollOptions(ctx context.Context, params GetPollOptionsParams) ([]PollOption, error)
	// GetPollResults implements getPollResults operation.
	//
	// Get poll results.
	//
	// GET /p/poll/{slug}/results
	GetPollResults(ctx context.Context, params GetPollResultsParams) (GetPollResultsRes, error)
	// GetPollVotes implements getPollVotes operation.
	//
	// Get votes for a poll.
	//
	// GET /polls/{id}/votes
	GetPollVotes(ctx context.Context, params GetPollVotesParams) ([]Vote, error)
	// GetPublicBookingLink implements getPublicBookingLink operation.
	//
	// Get public booking link info.
	//
	// GET /p/booking/{slug}
	GetPublicBookingLink(ctx context.Context, params GetPublicBookingLinkParams) (GetPublicBookingLinkRes, error)
	// GetPublicPoll implements getPublicPoll operation.
	//
	// Get public poll info.
	//
	// GET /p/poll/{slug}
	GetPublicPoll(ctx context.Context, params GetPublicPollParams) (GetPublicPollRes, error)
	// InitiateLogin implements initiateLogin operation.
	//
	// Redirect to OIDC provider.
	//
	// GET /auth/login
	InitiateLogin(ctx context.Context) (*InitiateLoginFound, error)
	// ListBookingLinks implements listBookingLinks operation.
	//
	// List all booking links.
	//
	// GET /booking-links
	ListBookingLinks(ctx context.Context) ([]BookingLink, error)
	// ListCalendars implements listCalendars operation.
	//
	// List calendar connections.
	//
	// GET /calendars
	ListCalendars(ctx context.Context) ([]CalendarConnection, error)
	// ListPolls implements listPolls operation.
	//
	// List all polls.
	//
	// GET /polls
	ListPolls(ctx context.Context) ([]Poll, error)
	// Logout implements logout operation.
	//
	// Clear session.
	//
	// POST /auth/logout
	Logout(ctx context.Context) error
	// PickPollWinner implements pickPollWinner operation.
	//
	// Pick winning option for poll.
	//
	// POST /polls/{id}/pick-winner
	PickPollWinner(ctx context.Context, req *PickPollWinnerReq, params PickPollWinnerParams) error
	// RemoveCalendar implements removeCalendar operation.
	//
	// Remove calendar connection.
	//
	// DELETE /calendars/{id}
	RemoveCalendar(ctx context.Context, params RemoveCalendarParams) error
	// SubmitVote implements submitVote operation.
	//
	// Submit poll vote.
	//
	// POST /p/poll/{slug}/vote
	SubmitVote(ctx context.Context, req *SubmitVoteReq, params SubmitVoteParams) (*Vote, error)
	// TestCalendar implements testCalendar operation.
	//
	// Test calendar connection by fetching events.
	//
	// POST /calendars/{id}/test
	TestCalendar(ctx context.Context, params TestCalendarParams) (TestCalendarRes, error)
	// UpdateBookingLink implements updateBookingLink operation.
	//
	// Update a booking link.
	//
	// PUT /booking-links/{id}
	UpdateBookingLink(ctx context.Context, req *UpdateBookingLinkReq, params UpdateBookingLinkParams) (*BookingLink, error)
	// UpdatePoll implements updatePoll operation.
	//
	// Update a poll.
	//
	// PUT /polls/{id}
	UpdatePoll(ctx context.Context, req *UpdatePollReq, params UpdatePollParams) (*Poll, error)
}

// Server implements http server based on OpenAPI v3 specification and
// calls Handler to handle requests.
type Server struct {
	h   Handler
	sec SecurityHandler
	baseServer
}

// NewServer creates new Server.
func NewServer(h Handler, sec SecurityHandler, opts ...ServerOption) (*Server, error) {
	s, err := newServerConfig(opts...).baseServer()
	if err != nil {
		return nil, err
	}
	return &Server{
		h:          h,
		sec:        sec,
		baseServer: s,
	}, nil
}
